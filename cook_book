

def open_file():
    with open(data.txt) as file:
        cook_book = {}
        for line in file:
            line = line.strip()
            cook_book.update({line:[]})
            k = int(file.readline().strip())
            for _ in range(k):
                lst = file.readline().strip().split(' | ')
                dict = {'ingredient_name': lst[0], 'measure': lst[2], 'quantity': lst[1]}
                cook_book[line].append(dict)
            file.readline()
        return cook_book

def get_shop_list_by_dishes(dishes, person_count):
    shopping_list = {}
    for ingred in dishes:
        for ingr in open_file()[ingred]:
            name_ingr = ingr.pop('ingredient_name')
            ingr['quantity'] = int(ingr['quantity']) * int(person_count)
            if name_ingr in shopping_list:
                ingr['quantity'] += shopping_list[name_ingr]['quantity']
            shopping_list.update({name_ingr: ingr})
     return shopping_list





